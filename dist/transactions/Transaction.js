"use strict";

var cov_2956hpz6db = function () {
  var path = "/Users/johnsgreenlandjr/go/src/github.com/ndau/ndaujs/src/transactions/Transaction.js";
  var hash = "916089c78b7f9b23a19c530f0b30c64edabc11ba";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/johnsgreenlandjr/go/src/github.com/ndau/ndaujs/src/transactions/Transaction.js",
    statementMap: {
      "0": {
        start: {
          line: 19,
          column: 10
        },
        end: {
          line: 19,
          column: 49
        }
      },
      "1": {
        start: {
          line: 23,
          column: 4
        },
        end: {
          line: 27,
          column: 5
        }
      },
      "2": {
        start: {
          line: 24,
          column: 6
        },
        end: {
          line: 26,
          column: 7
        }
      },
      "3": {
        start: {
          line: 28,
          column: 4
        },
        end: {
          line: 32,
          column: 5
        }
      },
      "4": {
        start: {
          line: 29,
          column: 6
        },
        end: {
          line: 31,
          column: 7
        }
      },
      "5": {
        start: {
          line: 33,
          column: 4
        },
        end: {
          line: 37,
          column: 5
        }
      },
      "6": {
        start: {
          line: 34,
          column: 6
        },
        end: {
          line: 36,
          column: 7
        }
      },
      "7": {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 39,
          column: 48
        }
      },
      "8": {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 40,
          column: 42
        }
      },
      "9": {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 41,
          column: 25
        }
      },
      "10": {
        start: {
          line: 42,
          column: 4
        },
        end: {
          line: 42,
          column: 27
        }
      },
      "11": {
        start: {
          line: 44,
          column: 4
        },
        end: {
          line: 44,
          column: 28
        }
      },
      "12": {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 45,
          column: 30
        }
      },
      "13": {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 46,
          column: 28
        }
      },
      "14": {
        start: {
          line: 47,
          column: 4
        },
        end: {
          line: 47,
          column: 33
        }
      },
      "15": {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 58,
          column: 5
        }
      },
      "16": {
        start: {
          line: 55,
          column: 6
        },
        end: {
          line: 55,
          column: 43
        }
      },
      "17": {
        start: {
          line: 57,
          column: 6
        },
        end: {
          line: 57,
          column: 75
        }
      },
      "18": {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 63,
          column: 5
        }
      },
      "19": {
        start: {
          line: 60,
          column: 6
        },
        end: {
          line: 60,
          column: 42
        }
      },
      "20": {
        start: {
          line: 62,
          column: 6
        },
        end: {
          line: 62,
          column: 74
        }
      },
      "21": {
        start: {
          line: 64,
          column: 4
        },
        end: {
          line: 101,
          column: 5
        }
      },
      "22": {
        start: {
          line: 70,
          column: 6
        },
        end: {
          line: 75,
          column: 7
        }
      },
      "23": {
        start: {
          line: 74,
          column: 8
        },
        end: {
          line: 74,
          column: 49
        }
      },
      "24": {
        start: {
          line: 89,
          column: 6
        },
        end: {
          line: 94,
          column: 7
        }
      },
      "25": {
        start: {
          line: 90,
          column: 25
        },
        end: {
          line: 90,
          column: 80
        }
      },
      "26": {
        start: {
          line: 91,
          column: 8
        },
        end: {
          line: 93,
          column: 9
        }
      },
      "27": {
        start: {
          line: 95,
          column: 6
        },
        end: {
          line: 95,
          column: 73
        }
      },
      "28": {
        start: {
          line: 96,
          column: 6
        },
        end: {
          line: 96,
          column: 33
        }
      },
      "29": {
        start: {
          line: 97,
          column: 6
        },
        end: {
          line: 97,
          column: 34
        }
      },
      "30": {
        start: {
          line: 99,
          column: 6
        },
        end: {
          line: 99,
          column: 44
        }
      },
      "31": {
        start: {
          line: 100,
          column: 6
        },
        end: {
          line: 100,
          column: 25
        }
      },
      "32": {
        start: {
          line: 105,
          column: 14
        },
        end: {
          line: 109,
          column: 6
        }
      },
      "33": {
        start: {
          line: 110,
          column: 4
        },
        end: {
          line: 110,
          column: 50
        }
      },
      "34": {
        start: {
          line: 111,
          column: 4
        },
        end: {
          line: 111,
          column: 24
        }
      },
      "35": {
        start: {
          line: 124,
          column: 32
        },
        end: {
          line: 124,
          column: 79
        }
      },
      "36": {
        start: {
          line: 125,
          column: 32
        },
        end: {
          line: 125,
          column: 63
        }
      },
      "37": {
        start: {
          line: 127,
          column: 4
        },
        end: {
          line: 137,
          column: 5
        }
      },
      "38": {
        start: {
          line: 129,
          column: 24
        },
        end: {
          line: 132,
          column: 7
        }
      },
      "39": {
        start: {
          line: 133,
          column: 6
        },
        end: {
          line: 133,
          column: 51
        }
      },
      "40": {
        start: {
          line: 135,
          column: 6
        },
        end: {
          line: 135,
          column: 37
        }
      },
      "41": {
        start: {
          line: 136,
          column: 6
        },
        end: {
          line: 136,
          column: 25
        }
      },
      "42": {
        start: {
          line: 141,
          column: 4
        },
        end: {
          line: 144,
          column: 5
        }
      },
      "43": {
        start: {
          line: 148,
          column: 4
        },
        end: {
          line: 148,
          column: 50
        }
      },
      "44": {
        start: {
          line: 157,
          column: 21
        },
        end: {
          line: 160,
          column: 5
        }
      },
      "45": {
        start: {
          line: 162,
          column: 4
        },
        end: {
          line: 174,
          column: 5
        }
      },
      "46": {
        start: {
          line: 164,
          column: 28
        },
        end: {
          line: 168,
          column: 7
        }
      },
      "47": {
        start: {
          line: 169,
          column: 19
        },
        end: {
          line: 169,
          column: 41
        }
      },
      "48": {
        start: {
          line: 170,
          column: 6
        },
        end: {
          line: 172,
          column: 7
        }
      },
      "49": {
        start: {
          line: 171,
          column: 8
        },
        end: {
          line: 171,
          column: 50
        }
      },
      "50": {
        start: {
          line: 173,
          column: 6
        },
        end: {
          line: 173,
          column: 43
        }
      },
      "51": {
        start: {
          line: 175,
          column: 4
        },
        end: {
          line: 175,
          column: 19
        }
      },
      "52": {
        start: {
          line: 184,
          column: 4
        },
        end: {
          line: 199,
          column: 5
        }
      },
      "53": {
        start: {
          line: 185,
          column: 23
        },
        end: {
          line: 188,
          column: 7
        }
      },
      "54": {
        start: {
          line: 189,
          column: 6
        },
        end: {
          line: 196,
          column: 7
        }
      },
      "55": {
        start: {
          line: 190,
          column: 8
        },
        end: {
          line: 190,
          column: 38
        }
      },
      "56": {
        start: {
          line: 194,
          column: 8
        },
        end: {
          line: 194,
          column: 75
        }
      },
      "57": {
        start: {
          line: 195,
          column: 8
        },
        end: {
          line: 195,
          column: 23
        }
      },
      "58": {
        start: {
          line: 198,
          column: 6
        },
        end: {
          line: 198,
          column: 25
        }
      },
      "59": {
        start: {
          line: 203,
          column: 29
        },
        end: {
          line: 205,
          column: 5
        }
      },
      "60": {
        start: {
          line: 206,
          column: 4
        },
        end: {
          line: 206,
          column: 71
        }
      },
      "61": {
        start: {
          line: 208,
          column: 4
        },
        end: {
          line: 212,
          column: 5
        }
      },
      "62": {
        start: {
          line: 216,
          column: 4
        },
        end: {
          line: 216,
          column: 59
        }
      },
      "63": {
        start: {
          line: 217,
          column: 34
        },
        end: {
          line: 219,
          column: 5
        }
      },
      "64": {
        start: {
          line: 220,
          column: 4
        },
        end: {
          line: 221,
          column: 56
        }
      },
      "65": {
        start: {
          line: 223,
          column: 4
        },
        end: {
          line: 227,
          column: 5
        }
      },
      "66": {
        start: {
          line: 231,
          column: 4
        },
        end: {
          line: 231,
          column: 42
        }
      },
      "67": {
        start: {
          line: 235,
          column: 4
        },
        end: {
          line: 242,
          column: 5
        }
      },
      "68": {
        start: {
          line: 236,
          column: 6
        },
        end: {
          line: 236,
          column: 25
        }
      },
      "69": {
        start: {
          line: 237,
          column: 6
        },
        end: {
          line: 237,
          column: 23
        }
      },
      "70": {
        start: {
          line: 238,
          column: 6
        },
        end: {
          line: 238,
          column: 30
        }
      },
      "71": {
        start: {
          line: 239,
          column: 6
        },
        end: {
          line: 239,
          column: 25
        }
      },
      "72": {
        start: {
          line: 241,
          column: 6
        },
        end: {
          line: 241,
          column: 25
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 22,
            column: 2
          },
          end: {
            line: 22,
            column: 3
          }
        },
        loc: {
          start: {
            line: 22,
            column: 49
          },
          end: {
            line: 48,
            column: 3
          }
        },
        line: 22
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 53,
            column: 3
          }
        },
        loc: {
          start: {
            line: 53,
            column: 47
          },
          end: {
            line: 102,
            column: 3
          }
        },
        line: 53
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 104,
            column: 2
          },
          end: {
            line: 104,
            column: 3
          }
        },
        loc: {
          start: {
            line: 104,
            column: 18
          },
          end: {
            line: 112,
            column: 3
          }
        },
        line: 104
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 118,
            column: 2
          },
          end: {
            line: 118,
            column: 3
          }
        },
        loc: {
          start: {
            line: 118,
            column: 26
          },
          end: {
            line: 138,
            column: 3
          }
        },
        line: 118
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 140,
            column: 2
          },
          end: {
            line: 140,
            column: 3
          }
        },
        loc: {
          start: {
            line: 140,
            column: 26
          },
          end: {
            line: 145,
            column: 3
          }
        },
        line: 140
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 147,
            column: 2
          },
          end: {
            line: 147,
            column: 3
          }
        },
        loc: {
          start: {
            line: 147,
            column: 44
          },
          end: {
            line: 149,
            column: 3
          }
        },
        line: 147
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 156,
            column: 2
          },
          end: {
            line: 156,
            column: 3
          }
        },
        loc: {
          start: {
            line: 156,
            column: 23
          },
          end: {
            line: 176,
            column: 3
          }
        },
        line: 156
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 183,
            column: 2
          },
          end: {
            line: 183,
            column: 3
          }
        },
        loc: {
          start: {
            line: 183,
            column: 18
          },
          end: {
            line: 200,
            column: 3
          }
        },
        line: 183
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 202,
            column: 2
          },
          end: {
            line: 202,
            column: 3
          }
        },
        loc: {
          start: {
            line: 202,
            column: 35
          },
          end: {
            line: 213,
            column: 3
          }
        },
        line: 202
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 215,
            column: 2
          },
          end: {
            line: 215,
            column: 3
          }
        },
        loc: {
          start: {
            line: 215,
            column: 36
          },
          end: {
            line: 228,
            column: 3
          }
        },
        line: 215
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 230,
            column: 2
          },
          end: {
            line: 230,
            column: 3
          }
        },
        loc: {
          start: {
            line: 230,
            column: 18
          },
          end: {
            line: 232,
            column: 3
          }
        },
        line: 230
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 234,
            column: 2
          },
          end: {
            line: 234,
            column: 3
          }
        },
        loc: {
          start: {
            line: 234,
            column: 39
          },
          end: {
            line: 243,
            column: 3
          }
        },
        line: 234
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 246,
            column: 2
          },
          end: {
            line: 246,
            column: 3
          }
        },
        loc: {
          start: {
            line: 246,
            column: 23
          },
          end: {
            line: 246,
            column: 25
          }
        },
        line: 246
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 249,
            column: 2
          },
          end: {
            line: 249,
            column: 3
          }
        },
        loc: {
          start: {
            line: 249,
            column: 26
          },
          end: {
            line: 249,
            column: 28
          }
        },
        line: 249
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 251,
            column: 2
          },
          end: {
            line: 251,
            column: 3
          }
        },
        loc: {
          start: {
            line: 251,
            column: 37
          },
          end: {
            line: 251,
            column: 39
          }
        },
        line: 251
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        }, {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        }],
        line: 23
      },
      "1": {
        loc: {
          start: {
            line: 23,
            column: 8
          },
          end: {
            line: 23,
            column: 66
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 23,
            column: 8
          },
          end: {
            line: 23,
            column: 24
          }
        }, {
          start: {
            line: 23,
            column: 28
          },
          end: {
            line: 23,
            column: 66
          }
        }],
        line: 23
      },
      "2": {
        loc: {
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        }, {
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        }],
        line: 28
      },
      "3": {
        loc: {
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 28,
            column: 48
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 28,
            column: 15
          }
        }, {
          start: {
            line: 28,
            column: 19
          },
          end: {
            line: 28,
            column: 48
          }
        }],
        line: 28
      },
      "4": {
        loc: {
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 37,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 37,
            column: 5
          }
        }, {
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 37,
            column: 5
          }
        }],
        line: 33
      },
      "5": {
        loc: {
          start: {
            line: 33,
            column: 8
          },
          end: {
            line: 33,
            column: 51
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 33,
            column: 8
          },
          end: {
            line: 33,
            column: 16
          }
        }, {
          start: {
            line: 33,
            column: 20
          },
          end: {
            line: 33,
            column: 51
          }
        }],
        line: 33
      },
      "6": {
        loc: {
          start: {
            line: 70,
            column: 6
          },
          end: {
            line: 75,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 70,
            column: 6
          },
          end: {
            line: 75,
            column: 7
          }
        }, {
          start: {
            line: 70,
            column: 6
          },
          end: {
            line: 75,
            column: 7
          }
        }],
        line: 70
      },
      "7": {
        loc: {
          start: {
            line: 71,
            column: 8
          },
          end: {
            line: 72,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 71,
            column: 8
          },
          end: {
            line: 71,
            column: 37
          }
        }, {
          start: {
            line: 72,
            column: 8
          },
          end: {
            line: 72,
            column: 49
          }
        }],
        line: 71
      },
      "8": {
        loc: {
          start: {
            line: 89,
            column: 6
          },
          end: {
            line: 94,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 89,
            column: 6
          },
          end: {
            line: 94,
            column: 7
          }
        }, {
          start: {
            line: 89,
            column: 6
          },
          end: {
            line: 94,
            column: 7
          }
        }],
        line: 89
      },
      "9": {
        loc: {
          start: {
            line: 162,
            column: 4
          },
          end: {
            line: 174,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 162,
            column: 4
          },
          end: {
            line: 174,
            column: 5
          }
        }, {
          start: {
            line: 162,
            column: 4
          },
          end: {
            line: 174,
            column: 5
          }
        }],
        line: 162
      },
      "10": {
        loc: {
          start: {
            line: 170,
            column: 6
          },
          end: {
            line: 172,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 170,
            column: 6
          },
          end: {
            line: 172,
            column: 7
          }
        }, {
          start: {
            line: 170,
            column: 6
          },
          end: {
            line: 172,
            column: 7
          }
        }],
        line: 170
      },
      "11": {
        loc: {
          start: {
            line: 189,
            column: 6
          },
          end: {
            line: 196,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 189,
            column: 6
          },
          end: {
            line: 196,
            column: 7
          }
        }, {
          start: {
            line: 189,
            column: 6
          },
          end: {
            line: 196,
            column: 7
          }
        }],
        line: 189
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0]
    },
    _coverageSchema: "43e27e138ebf9cfc5966b082cf9a028302ed4184",
    hash: "916089c78b7f9b23a19c530f0b30c64edabc11ba"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return coverage[path] = coverageData;
}();

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _KeyMaster = _interopRequireDefault(require("../helpers/KeyMaster.js"));

var _TransactionAPI = _interopRequireDefault(require("../api/TransactionAPI.js"));

var _TxSignPrep = _interopRequireDefault(require("../model/TxSignPrep.js"));

var _AccountAPI = _interopRequireDefault(require("../api/AccountAPI.js"));

var _APIAddressHelper = _interopRequireDefault(require("../api/helpers/APIAddressHelper.js"));

var _LoggerHelper = _interopRequireDefault(require("../helpers/LoggerHelper.js"));

var _Wallet = _interopRequireDefault(require("../model/Wallet.js"));

var _Account = _interopRequireDefault(require("../model/Account.js"));

var l = (cov_2956hpz6db.s[0]++, _LoggerHelper["default"].curryLogger('Transaction'));

var Transaction = /*#__PURE__*/function () {
  function Transaction(wallet, account, transactionType) {
    (0, _classCallCheck2["default"])(this, Transaction);
    cov_2956hpz6db.f[0]++;
    cov_2956hpz6db.s[1]++;

    if ((cov_2956hpz6db.b[1][0]++, !transactionType) || (cov_2956hpz6db.b[1][1]++, transactionType.constructor !== String)) {
      cov_2956hpz6db.b[0][0]++;
      cov_2956hpz6db.s[2]++;
      throw new Error("transactionType (string) argument required to construct a tx");
    } else {
      cov_2956hpz6db.b[0][1]++;
    }

    cov_2956hpz6db.s[3]++;

    if ((cov_2956hpz6db.b[3][0]++, !wallet) || (cov_2956hpz6db.b[3][1]++, wallet.constructor !== _Wallet["default"])) {
      cov_2956hpz6db.b[2][0]++;
      cov_2956hpz6db.s[4]++;
      throw new Error("wallet (object) argument required to construct a ".concat(transactionType, " tx"));
    } else {
      cov_2956hpz6db.b[2][1]++;
    }

    cov_2956hpz6db.s[5]++;

    if ((cov_2956hpz6db.b[5][0]++, !account) || (cov_2956hpz6db.b[5][1]++, account.constructor !== _Account["default"])) {
      cov_2956hpz6db.b[4][0]++;
      cov_2956hpz6db.s[6]++;
      throw new Error("account (object) argument required to construct a ".concat(transactionType, " tx"));
    } else {
      cov_2956hpz6db.b[4][1]++;
    }

    cov_2956hpz6db.s[7]++;
    this._sendType = _APIAddressHelper["default"].BLOCKCHAIN;
    cov_2956hpz6db.s[8]++;
    this.transactionType = transactionType;
    cov_2956hpz6db.s[9]++;
    this._wallet = wallet;
    cov_2956hpz6db.s[10]++;
    this._account = account;
    cov_2956hpz6db.s[11]++;
    this._keys = wallet.keys;
    cov_2956hpz6db.s[12]++;
    this._jsonTransaction = {};
    cov_2956hpz6db.s[13]++;
    this._submitAddress = '';
    cov_2956hpz6db.s[14]++;
    this._prevalidateAddress = '';
  }
  /**
   * Create a transaction and store information internally
   */


  (0, _createClass2["default"])(Transaction, [{
    key: "create",
    value: function () {
      var _create = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(ownershipKeys, validationKeys) {
        var sequence;
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                cov_2956hpz6db.f[1]++;
                cov_2956hpz6db.s[15]++;
                _context.prev = 2;
                cov_2956hpz6db.s[16]++;
                _context.next = 6;
                return this.createPrevalidateAddress();

              case 6:
                _context.next = 12;
                break;

              case 8:
                _context.prev = 8;
                _context.t0 = _context["catch"](2);
                cov_2956hpz6db.s[17]++;
                throw new Error("could not create prevalidate address: ".concat(_context.t0.message));

              case 12:
                cov_2956hpz6db.s[18]++;
                _context.prev = 13;
                cov_2956hpz6db.s[19]++;
                _context.next = 17;
                return this.createSubmissionAddress();

              case 17:
                _context.next = 23;
                break;

              case 19:
                _context.prev = 19;
                _context.t1 = _context["catch"](13);
                cov_2956hpz6db.s[20]++;
                throw new Error("could not create submission address: ".concat(_context.t1.message));

              case 23:
                cov_2956hpz6db.s[21]++;
                _context.prev = 24;
                cov_2956hpz6db.s[22]++;

                if (!((cov_2956hpz6db.b[7][0]++, !this._account.validationKeys) || (cov_2956hpz6db.b[7][1]++, this._account.validationKeys.length === 0))) {
                  _context.next = 32;
                  break;
                }

                cov_2956hpz6db.b[6][0]++;
                cov_2956hpz6db.s[23]++;
                throw Error('No validation keys present');

              case 32:
                cov_2956hpz6db.b[6][1]++;

              case 33:
                cov_2956hpz6db.s[24]++;

                if (this.getSignature()) {
                  _context.next = 44;
                  break;
                }

                cov_2956hpz6db.b[8][0]++;
                cov_2956hpz6db.s[25]++;
                _context.next = 39;
                return _AccountAPI["default"].getNextSequence(this._account.address);

              case 39:
                sequence = _context.sent;
                cov_2956hpz6db.s[26]++;
                this._jsonTransaction = {
                  sequence: sequence
                };
                _context.next = 45;
                break;

              case 44:
                cov_2956hpz6db.b[8][1]++;

              case 45:
                cov_2956hpz6db.s[27]++;
                _context.next = 48;
                return this.createTransactionSpecific(ownershipKeys, validationKeys);

              case 48:
                cov_2956hpz6db.s[28]++;
                this.addToJsonTransaction();
                cov_2956hpz6db.s[29]++;
                return _context.abrupt("return", this._jsonTransaction);

              case 54:
                _context.prev = 54;
                _context.t2 = _context["catch"](24);
                cov_2956hpz6db.s[30]++;
                console.log('transaction error: ' + _context.t2);
                cov_2956hpz6db.s[31]++;
                this.handleError(_context.t2);

              case 60:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this, [[2, 8], [13, 19], [24, 54]]);
      }));

      function create(_x, _x2) {
        return _create.apply(this, arguments);
      }

      return create;
    }()
  }, {
    key: "handleError",
    value: function handleError(e) {
      cov_2956hpz6db.f[2]++;
      var msg = (cov_2956hpz6db.s[32]++, i18next.t('transaction problem', {
        type: this.transactionType,
        nickname: this._account.addressData.nickname,
        error: e.message
      }));
      cov_2956hpz6db.s[33]++;
      l.error("error from blockchain: ".concat(e.message));
      cov_2956hpz6db.s[34]++;
      throw new Error(msg);
    }
    /**
     * Sign the transaction for prevalidation and submission. You must
     * call `create` first before you call this method.
     */

  }, {
    key: "sign",
    value: function () {
      var _sign = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(privateKey) {
        var preparedTransaction, base64EncodedPrepTx, signature;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                cov_2956hpz6db.f[3]++;
                // Here we get the ownership key to sign for SetValidation. This is
                // the ONLY time we use the ownershipKey. Any subsequent/other
                // transactions use the validationKey within the account
                // Use the TxSignPrep to get it ready to send
                preparedTransaction = (cov_2956hpz6db.s[35]++, new _TxSignPrep["default"]().prepare(this._jsonTransaction));
                base64EncodedPrepTx = (cov_2956hpz6db.s[36]++, preparedTransaction.b64encode());
                cov_2956hpz6db.s[37]++;
                _context2.prev = 4;
                cov_2956hpz6db.s[38]++;
                _context2.next = 8;
                return Keyaddr.signEdB64(privateKey, base64EncodedPrepTx);

              case 8:
                signature = _context2.sent;
                cov_2956hpz6db.s[39]++;
                this.addSignatureToJsonTransaction(signature);
                _context2.next = 19;
                break;

              case 13:
                _context2.prev = 13;
                _context2.t0 = _context2["catch"](4);
                cov_2956hpz6db.s[40]++;
                console.log('sign error: ' + _context2.t0);
                cov_2956hpz6db.s[41]++;
                this.handleError(_context2.t0);

              case 19:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this, [[4, 13]]);
      }));

      function sign(_x3) {
        return _sign.apply(this, arguments);
      }

      return sign;
    }()
  }, {
    key: "privateKeyForSigning",
    value: function privateKeyForSigning() {
      cov_2956hpz6db.f[4]++;
      cov_2956hpz6db.s[42]++;
      return _KeyMaster["default"].getPrivateKeyFromHash(this._wallet, this._account.validationKeys[0]);
    }
  }, {
    key: "addSignatureToJsonTransaction",
    value: function addSignatureToJsonTransaction(signature) {
      cov_2956hpz6db.f[5]++;
      cov_2956hpz6db.s[43]++;
      this._jsonTransaction.signatures = [signature];
    }
    /**
     * Send this transaction to the blockchain to see if all is well.
     * You must first call `create` and `sign` before you call this. If all
     * is well you can then call `submit`.
     */

  }, {
    key: "prevalidate",
    value: function () {
      var _prevalidate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3() {
        var response, spendableNapu, data;
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                cov_2956hpz6db.f[6]++;
                cov_2956hpz6db.s[44]++;
                _context3.next = 4;
                return _TransactionAPI["default"].prevalidate(this._prevalidateAddress, this._jsonTransaction);

              case 4:
                response = _context3.sent;
                cov_2956hpz6db.s[45]++;

                if (!response.err) {
                  _context3.next = 22;
                  break;
                }

                cov_2956hpz6db.b[9][0]++;
                // If there's an error, check to see if we have enough to cover the fee
                spendableNapu = (cov_2956hpz6db.s[46]++, AccountAPIHelper.spendableNapu(this._account.addressData, true, AppConfig.NDAU_DETAIL_PRECISION));
                data = (cov_2956hpz6db.s[47]++, response.err.getData());
                cov_2956hpz6db.s[48]++;

                if (!(spendableNapu < data.fee_napu)) {
                  _context3.next = 17;
                  break;
                }

                cov_2956hpz6db.b[10][0]++;
                cov_2956hpz6db.s[49]++;
                throw new BlockchainAPIError(response.err);

              case 17:
                cov_2956hpz6db.b[10][1]++;

              case 18:
                cov_2956hpz6db.s[50]++;
                return _context3.abrupt("return", this.handleError(response.err));

              case 22:
                cov_2956hpz6db.b[9][1]++;

              case 23:
                cov_2956hpz6db.s[51]++;
                return _context3.abrupt("return", response);

              case 25:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function prevalidate() {
        return _prevalidate.apply(this, arguments);
      }

      return prevalidate;
    }()
    /**
     * This is the last call that you should make. You must call
     * `create`, `sign` and `prevalidate` before you `submit` to
     * the blockchain.
     */

  }, {
    key: "submit",
    value: function () {
      var _submit = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee4() {
        var response;
        return _regenerator["default"].wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                cov_2956hpz6db.f[7]++;
                cov_2956hpz6db.s[52]++;
                _context4.prev = 2;
                cov_2956hpz6db.s[53]++;
                _context4.next = 6;
                return _TransactionAPI["default"].submit(this._submitAddress, this._jsonTransaction);

              case 6:
                response = _context4.sent;
                cov_2956hpz6db.s[54]++;

                if (!response.err) {
                  _context4.next = 14;
                  break;
                }

                cov_2956hpz6db.b[11][0]++;
                cov_2956hpz6db.s[55]++;
                this.handleError(response.err);
                _context4.next = 19;
                break;

              case 14:
                cov_2956hpz6db.b[11][1]++;
                cov_2956hpz6db.s[56]++;
                // Successful transaction so update
                // the account with the new sequence
                this._account.addressData.sequence = this._jsonTransaction.sequence;
                cov_2956hpz6db.s[57]++;
                return _context4.abrupt("return", response);

              case 19:
                _context4.next = 25;
                break;

              case 21:
                _context4.prev = 21;
                _context4.t0 = _context4["catch"](2);
                cov_2956hpz6db.s[58]++;
                this.handleError(_context4.t0);

              case 25:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this, [[2, 21]]);
      }));

      function submit() {
        return _submit.apply(this, arguments);
      }

      return submit;
    }()
  }, {
    key: "createSubmissionAddress",
    value: function () {
      var _createSubmissionAddress = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee5() {
        var submitAddressPre;
        return _regenerator["default"].wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                cov_2956hpz6db.f[8]++;
                cov_2956hpz6db.s[59]++;
                _context5.next = 4;
                return _APIAddressHelper["default"].getTransactionSubmitAPIAddress(this._sendType);

              case 4:
                submitAddressPre = _context5.sent;
                cov_2956hpz6db.s[60]++;
                this._submitAddress = submitAddressPre + '/' + this.transactionType;
                cov_2956hpz6db.s[61]++;
                l.debug("submission address: ".concat(this._submitAddress, " with send type: ").concat(this._sendType));

              case 9:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, this);
      }));

      function createSubmissionAddress() {
        return _createSubmissionAddress.apply(this, arguments);
      }

      return createSubmissionAddress;
    }()
  }, {
    key: "createPrevalidateAddress",
    value: function () {
      var _createPrevalidateAddress = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee6() {
        var prevalidateAddressPre;
        return _regenerator["default"].wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                cov_2956hpz6db.f[9]++;
                cov_2956hpz6db.s[62]++;
                console.log('prevalidate send type: ' + this._sendType);
                cov_2956hpz6db.s[63]++;
                _context6.next = 6;
                return _APIAddressHelper["default"].getTransactionPrevalidateAPIAddress(this._sendType);

              case 6:
                prevalidateAddressPre = _context6.sent;
                cov_2956hpz6db.s[64]++;
                this._prevalidateAddress = prevalidateAddressPre + '/' + this.transactionType;
                cov_2956hpz6db.s[65]++;
                l.debug("prevalidate address: ".concat(this._prevalidateAddress, " send type ").concat(this._sendType));

              case 11:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, this);
      }));

      function createPrevalidateAddress() {
        return _createPrevalidateAddress.apply(this, arguments);
      }

      return createPrevalidateAddress;
    }()
  }, {
    key: "getSignature",
    value: function getSignature() {
      cov_2956hpz6db.f[10]++;
      cov_2956hpz6db.s[66]++;
      return this._jsonTransaction.signature;
    }
  }, {
    key: "createSignPrevalidateSubmit",
    value: function () {
      var _createSignPrevalidateSubmit = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee7() {
        return _regenerator["default"].wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                cov_2956hpz6db.f[11]++;
                cov_2956hpz6db.s[67]++;
                _context7.prev = 2;
                cov_2956hpz6db.s[68]++;
                _context7.next = 6;
                return this.create();

              case 6:
                cov_2956hpz6db.s[69]++;
                _context7.next = 9;
                return this.sign();

              case 9:
                cov_2956hpz6db.s[70]++;
                _context7.next = 12;
                return this.prevalidate();

              case 12:
                cov_2956hpz6db.s[71]++;
                _context7.next = 15;
                return this.submit();

              case 15:
                _context7.next = 21;
                break;

              case 17:
                _context7.prev = 17;
                _context7.t0 = _context7["catch"](2);
                cov_2956hpz6db.s[72]++;
                this.handleError(_context7.t0);

              case 21:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee7, this, [[2, 17]]);
      }));

      function createSignPrevalidateSubmit() {
        return _createSignPrevalidateSubmit.apply(this, arguments);
      }

      return createSignPrevalidateSubmit;
    }() // This is meant to be overridden if transactions require specific error handling.

  }, {
    key: "handleSubmitError",
    value: function handleSubmitError() {
      cov_2956hpz6db.f[12]++;
    } // This is meant to be overridden to include the properties of the transaction to be signed.

  }, {
    key: "addToJsonTransaction",
    value: function addToJsonTransaction() {
      cov_2956hpz6db.f[13]++;
    }
  }, {
    key: "createTransactionSpecific",
    value: function () {
      var _createTransactionSpecific = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee8() {
        return _regenerator["default"].wrap(function _callee8$(_context8) {
          while (1) {
            switch (_context8.prev = _context8.next) {
              case 0:
                cov_2956hpz6db.f[14]++;

              case 1:
              case "end":
                return _context8.stop();
            }
          }
        }, _callee8);
      }));

      function createTransactionSpecific() {
        return _createTransactionSpecific.apply(this, arguments);
      }

      return createTransactionSpecific;
    }()
  }]);
  return Transaction;
}();

exports["default"] = Transaction;